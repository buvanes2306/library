<!DOCTYPE html>
<html>
<head>
    <title>Test Books API</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .book { border: 1px solid #ccc; padding: 10px; margin: 10px 0; }
        pre { background: #f5f5f5; padding: 10px; }
    </style>
</head>
<body>
    <h1>Books API Test</h1>
    <button onclick="fetchBooks()">Fetch Books</button>
    <div id="result"></div>

    <script>
        async function fetchBooks() {
            try {
                console.log('Fetching books...');
                const response = await fetch('http://localhost:5000/api/books', {
                    method: 'GET',
                    headers: { 
                        'Content-Type': 'application/json',
                        'Accept': 'application/json'
                    },
                    credentials: 'include'
                });
                
                console.log('Response status:', response.status);
                const data = await response.json();
                console.log('Books data:', data);
                
                let html = '<h3>Response:</h3><pre>' + JSON.stringify(data, null, 2) + '</pre>';
                
                if (data.success && data.data && data.data.books) {
                    html += '<h3>Books (' + data.data.books.length + '):</h3>';
                    data.data.books.forEach(book => {
                        html += '<div class="book">';
                        html += '<strong>' + book.title + '</strong><br>';
                        html += 'Author: ' + book.author + '<br>';
                        html += 'Acc No: ' + book.accNo + '<br>';
                        html += 'Status: ' + book.status;
                        html += '</div>';
                    });
                }
                
                document.getElementById('result').innerHTML = html;
            } catch (error) {
                console.error('Error:', error);
                document.getElementById('result').innerHTML = 'Error: ' + error.message;
            }
        }
        
        // Auto-fetch on page load
        window.onload = fetchBooks;
    </script>
</body>
</html>
